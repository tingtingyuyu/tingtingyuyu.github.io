<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-light.css" />
  <script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
  <script>
    L2Dwidget.init({
      "model": { "jsonPath":"https://unpkg.com/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json", "scale": 1, "hHeadPos":0.5, "vHeadPos":0.618 },
      "display": { "position": "right", "width": 400, "height": 400, "hOffset": 0, "vOffset": 0 },
      "mobile": { "show": true, "scale": 0.5 },
      "react": { "opacityDefault": 0.7, "opacityOnHover": 0.2 }
    });
  </script>

<style>
  body {
    background-color: #f5f5d5;
  }
  .markdown-body 
  {
    background-color: #f5f5d5;
  }

  .main {
    width: 85%;
    margin: 0 auto;
    max-width: 1260px;

  }

  @media screen and (max-width: 600px) {
    .main {
      width: 85%;
    }
  }

  .navigation {
    margin-bottom: 50px;
    border-bottom: 1px solid #d3d3d3;
    line-height: 2.5;
    margin-top: 25px;
  }

  .navigation a {
    color: #567;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  #homepage,
  #homepage body {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  .homepage-main {
    margin: 0 auto;
    position: relative;
    top: 30%;
    font-weight: normal;
    margin: 0 0 10px;
  }

  .homepage-title-area {
    transition: opacity 1s;
    margin-bottom: 60px;
  }

  .homepage-title,
  .homepage-subtitle {
    text-align: center;
    font-weight: normal;
    opacity: 0.7;
  }

  .homepage-title {
    font-size: 30px;
    margin: 0 0 10px;
    font-family: apple-system, 'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC',
      'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
  }

  .homepage-subtitle {
    font-size: 12px;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .homepage-navigation ul {
    padding: 0;
    text-align: center;
  }

  .homepage-navigation li {
    list-style: none;
    display: inline-block;
    margin: 30px 0 0 30px;
  }

  .homepage-navigation li:first-child {
    margin-left: 0;
  }

  .homepage-navigation a {
    color: #dd4242;
    text-decoration: none;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .homepage-navigation a:hover {
    text-decoration: underline;
  }

  .about p {
    margin-bottom: 30px;
    line-height: 1.5;
  }

  .about li {
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
    margin-top: 15px;
  }

  .about li a {
    color: #567;
    text-decoration: underline solid;
  }

  .article-title {
    font-weight: normal;
    font-family: apple-system, 'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC',
      'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
  }

  .article-info {
    color: #777777;
    margin-bottom: 50px;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .article-info span {
    margin: 0 30px 0px 0;
  }

  .article-info .keyword {
    margin: 5px 5px 0 0;
    display: inline-block;
  }

  @font-face {
    font-family: octicons-link;
    src: url("https://cdnjs.cloudflare.com/ajax/libs/octicons/4.4.0/font/octicons.woff") format('woff');
  }

  .blogs-list-block {
    line-height: 1.5em;
  }

  .blogs-list-block ol {
    margin-bottom: 60px;
  }

  @media screen and (max-width: 600px) {
    .blogs-list-block ol {
      padding-left: 1em;
    }
  }

  .blogs-list-block li {
    display: flex;
    list-style-type: none;
    margin-bottom: 20px;
  }

  .annual-block {
    margin-bottom: 50px;
  }

  .annual-block-headline {
    display: block;
    font-size: 20px;
    margin-bottom: 30px;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .annual-block-title {
    font-family: apple-system, 'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC',
      'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
    color: #567;
    text-decoration: none;
  }

  .annual-block-title.is-dir {
    text-decoration: dotted underline;
  }

  .annual-block-date {
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
    margin-right: 30px;
    color: #999999;
  }

  .rss-link {
    display: block;
    width: 3em;
    padding-left: 100%;
    margin: 50px 0 100px -3em;
    color: #567;
  }

  .error {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
  }

  .error p {
    font-size: 20px;
  }

  .error a {
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
    text-decoration: underline dotted;
    color: #777777;
  }
</style>


    <title>表分区 - 首页</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">首页</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">表分区</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1673349415391"
                  >2023-01-10 19:16</time
                ></span
              >
              <span
                >Updated At：<time datetime="1673351488761"
                  >2023-01-10 19:51</time
                ></span
              >
            </div>
            
            <div>
              Keywords: 
              <span class="keyword">sqlserver</span>
              
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="表分区">表分区</h1>
<p>将一个大表（表中含有非常多条数据）的数据根据某条件（<code>仅限该表的主键</code>）拆分成多个文件存放，以提高查询数据时的效率</p>
<h2 id="为什么要分区">为什么要分区？</h2>
<ol>
<li>数据库文件默认是存储到一个文件中</li>
<li>文件越来越大，查询就变的很慢</li>
<li>所以我们需要拆分成小文件存储</li>
</ol>
<h2 id="分的方式">分的方式</h2>
<ol>
<li>水平</li>
<li>垂直</li>
</ol>
<h2 id="水平分区">水平分区</h2>
<ol>
<li>创建文件组</li>
<li>创建文件到文件组</li>
<li>创建分区函数</li>
<li>创建分区方案</li>
<li>应用到分区表</li>
</ol>
<h2 id="分区表">分区表</h2>
<h3 id="创建">创建</h3>
<div><pre class="hljs"><code>create <span class="hljs-built_in">table</span> <span class="hljs-variable">&lt;表名&gt;</span> (
  <span class="hljs-variable">&lt;列定义&gt;</span>
)<span class="hljs-keyword">on</span><span class="hljs-variable">&lt;分区方案名&gt;</span>(分区列名)</code></pre></div>
<h3 id="普通表转化">普通表转化</h3>
<div><pre class="hljs"><code><span class="hljs-comment">--删除以前的聚集索引</span>
<span class="hljs-keyword">DROP</span> <span class="hljs-keyword">INDEX</span> [create_time_clustered_index] <span class="hljs-keyword">ON</span> [dbo].[order_detail] <span class="hljs-keyword">WITH</span> ( ONLINE = <span class="hljs-keyword">OFF</span> )

GO

<span class="hljs-comment">--创建分区索引</span>
<span class="hljs-keyword">CREATE</span> CLUSTERED <span class="hljs-keyword">INDEX</span> [create_time_clustered_index] <span class="hljs-keyword">ON</span> [dbo].[order_detail] 
(
    create_time
)<span class="hljs-keyword">WITH</span> (SORT_IN_TEMPDB = <span class="hljs-keyword">OFF</span>, IGNORE_DUP_KEY = <span class="hljs-keyword">OFF</span>, DROP_EXISTING = <span class="hljs-keyword">OFF</span>, ONLINE = <span class="hljs-keyword">OFF</span>) <span class="hljs-keyword">ON</span> [myPartitionSchema]([create_time])</code></pre></div>
<h2 id="图形向导">图形向导</h2>
<ol>
<li>右键要分区的表 -&gt; 存储（Storage）-&gt; 创建分区（Create Partition）-&gt; 下一步</li>
<li>选择要分区的列</li>
<li>选择或创建分区函数</li>
<li>选择或创建分区方案</li>
<li>指定临界值，以及左边界或右边界。</li>
</ol>
</div>
      </article>
    </div>
  </body>
</html>
