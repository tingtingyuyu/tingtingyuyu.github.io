<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" />
<link rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/5.1.0/github-markdown-light.css" />
  <script src="https://eqcn.ajz.miesnfu.com/wp-content/plugins/wp-3d-pony/live2dw/lib/L2Dwidget.min.js"></script>
  <script>
    L2Dwidget.init({
      "model": { "jsonPath":"https://unpkg.com/live2d-widget-model-hijiki@1.0.5/assets/hijiki.model.json", "scale": 1, "hHeadPos":0.5, "vHeadPos":0.618 },
      "display": { "position": "right", "width": 400, "height": 400, "hOffset": 0, "vOffset": 0 },
      "mobile": { "show": true, "scale": 0.5 },
      "react": { "opacityDefault": 0.7, "opacityOnHover": 0.2 }
    });
  </script>

<style>
  body {
    background-color: #f5f5d5;
  }
  .markdown-body 
  {
    background-color: #f5f5d5;
  }

  .main {
    width: 85%;
    margin: 0 auto;
    max-width: 1260px;

  }

  @media screen and (max-width: 600px) {
    .main {
      width: 85%;
    }
  }

  .navigation {
    margin-bottom: 50px;
    border-bottom: 1px solid #d3d3d3;
    line-height: 2.5;
    margin-top: 25px;
  }

  .navigation a {
    color: #567;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  #homepage,
  #homepage body {
    margin: 0;
    padding: 0;
    height: 100%;
  }

  .homepage-main {
    margin: 0 auto;
    position: relative;
    top: 30%;
    font-weight: normal;
    margin: 0 0 10px;
  }

  .homepage-title-area {
    transition: opacity 1s;
    margin-bottom: 60px;
  }

  .homepage-title,
  .homepage-subtitle {
    text-align: center;
    font-weight: normal;
    opacity: 0.7;
  }

  .homepage-title {
    font-size: 30px;
    margin: 0 0 10px;
    font-family: apple-system, 'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC',
      'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
  }

  .homepage-subtitle {
    font-size: 12px;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .homepage-navigation ul {
    padding: 0;
    text-align: center;
  }

  .homepage-navigation li {
    list-style: none;
    display: inline-block;
    margin: 30px 0 0 30px;
  }

  .homepage-navigation li:first-child {
    margin-left: 0;
  }

  .homepage-navigation a {
    color: #dd4242;
    text-decoration: none;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .homepage-navigation a:hover {
    text-decoration: underline;
  }

  .about p {
    margin-bottom: 30px;
    line-height: 1.5;
  }

  .about li {
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
    margin-top: 15px;
  }

  .about li a {
    color: #567;
    text-decoration: underline solid;
  }

  .article-title {
    font-weight: normal;
    font-family: apple-system, 'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC',
      'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
  }

  .article-info {
    color: #777777;
    margin-bottom: 50px;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .article-info span {
    margin: 0 30px 0px 0;
  }

  .article-info .keyword {
    margin: 5px 5px 0 0;
    display: inline-block;
  }

  @font-face {
    font-family: octicons-link;
    src: url("https://cdnjs.cloudflare.com/ajax/libs/octicons/4.4.0/font/octicons.woff") format('woff');
  }

  .blogs-list-block {
    line-height: 1.5em;
  }

  .blogs-list-block ol {
    margin-bottom: 60px;
  }

  @media screen and (max-width: 600px) {
    .blogs-list-block ol {
      padding-left: 1em;
    }
  }

  .blogs-list-block li {
    display: flex;
    list-style-type: none;
    margin-bottom: 20px;
  }

  .annual-block {
    margin-bottom: 50px;
  }

  .annual-block-headline {
    display: block;
    font-size: 20px;
    margin-bottom: 30px;
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
  }

  .annual-block-title {
    font-family: apple-system, 'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC',
      'Hiragino Sans GB', 'Microsoft YaHei', 'WenQuanYi Micro Hei', sans-serif;
    color: #567;
    text-decoration: none;
  }

  .annual-block-title.is-dir {
    text-decoration: dotted underline;
  }

  .annual-block-date {
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
    margin-right: 30px;
    color: #999999;
  }

  .rss-link {
    display: block;
    width: 3em;
    padding-left: 100%;
    margin: 50px 0 100px -3em;
    color: #567;
  }

  .error {
    position: absolute;
    top: 40%;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
  }

  .error p {
    font-size: 20px;
  }

  .error a {
    font-family: 'Lucida Console', 'Liberation Mono', Menlo, Monaco, Roboto, apple-system,
      'Helvetica Neue', Arial, 'Helvetica Neue', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei',
      'WenQuanYi Micro Hei', sans-serif;
    text-decoration: underline dotted;
    color: #777777;
  }
</style>


    <title>分区函数和分区方案 - 首页</title>
  <link rel="stylesheet" href="/_markdown_plugin_assets/highlight.js/atom-one-light.css" /></head>
  <body>
    <div class="main">
      <nav class="navigation">
        <a href="/">首页</a>
      </nav>
      <article>
        <header>
          <h1 class="article-title">分区函数和分区方案</h1>
          <div class="article-info">
            <div>
              <span
                >Created At：<time datetime="1673348890336"
                  >2023-01-10 19:08</time
                ></span
              >
              <span
                >Updated At：<time datetime="1673351691883"
                  >2023-01-10 19:54</time
                ></span
              >
            </div>
            
            <div>
              Keywords: 
              <span class="keyword">sqlserver</span>
              
            </div>
            
          </div>
        </header>
        <div class="article-content markdown-body"><h1 id="分区函数和分区方案">分区函数和分区方案</h1>
<h2 id="创建分区函数">创建分区函数</h2>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">FUNCTION</span> [fun_name](datetime) <span class="hljs-keyword">AS</span> <span class="hljs-keyword">RANGE</span> <span class="hljs-keyword">RIGHT</span> <span class="hljs-keyword">FOR</span> <span class="hljs-keyword">VALUES</span> (N<span class="hljs-string">'2022-01-01'</span>, N<span class="hljs-string">'2023-01-01'</span>)</code></pre></div>
<h2 id="创建分区方案">创建分区方案</h2>
<div><pre class="hljs"><code><span class="hljs-keyword">CREATE</span> <span class="hljs-keyword">PARTITION</span> SCHEME [<span class="hljs-built_in">schema_name</span>] <span class="hljs-keyword">AS</span> <span class="hljs-keyword">PARTITION</span> [fun_name] <span class="hljs-keyword">TO</span> ([file_group_name1],[file_group_name1])</code></pre></div>
<h2 id="合并分区">合并分区</h2>
<p>方向是从1到2</p>
<div><pre class="hljs"><code><span class="hljs-keyword">alter</span> <span class="hljs-keyword">PARTITION</span> <span class="hljs-keyword">FUNCTION</span> [fun_name]() <span class="hljs-keyword">merge</span> <span class="hljs-keyword">RANGE</span>  (N<span class="hljs-string">'2022-01-01'</span>)</code></pre></div>
<h2 id="拆分分区">拆分分区</h2>
<p>在分区函数中新增一个边界值。</p>
<div><pre class="hljs"><code><span class="hljs-attribute">alter</span> partition function myPartitionFun()
<span class="hljs-attribute">split</span> range(N'<span class="hljs-number">2005</span>-<span class="hljs-number">01</span>-<span class="hljs-number">01</span>T00:<span class="hljs-number">00</span>:<span class="hljs-number">00</span>.<span class="hljs-number">000</span>')</code></pre></div>
<p>如果分区函数已经关联了分区方案，那么分区数 不能大于分区方案中的文件组数。如果你的分区数和分区方案中的文件组数不符合要求，你可以先扩展分区方案中的文件组数，再扩展分区函数的临界值。
扩展分区方案中的文件组数</p>
<div><pre class="hljs"><code><span class="hljs-comment">--新建立一个数据文件</span>
<span class="hljs-keyword">alter</span> <span class="hljs-keyword">database</span> mydb <span class="hljs-keyword">add</span> filegroup myfilegroup6
GO
<span class="hljs-comment">--新建一个文件组</span>
<span class="hljs-keyword">alter</span> <span class="hljs-keyword">database</span> mydb <span class="hljs-keyword">add</span> file 
(<span class="hljs-type">name</span>=N<span class="hljs-string">'myfile6'</span>,filename=N<span class="hljs-string">'D:\softwares\sqlserver\root\MSSQL14.MSSQLSERVER\MSSQL\DATA\myfile6.ndf'</span>,size=<span class="hljs-number">10</span>Mb,filegrowth=<span class="hljs-number">5</span>mb)
<span class="hljs-keyword">to</span> filegroup myfilegroup6

GO
<span class="hljs-comment">--添加文件组到分区方案</span>
<span class="hljs-keyword">ALTER</span> <span class="hljs-keyword">PARTITION</span> SCHEME myPartitionSchema  
NEXT USED myfilegroup6;
GO</code></pre></div>
</div>
      </article>
    </div>
  </body>
</html>
